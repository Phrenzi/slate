<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Phrenzi API! You can use our API to access Phrenzi API endpoints, which can get
information on various establishments, transactions, and challenges in our database.</p>

<p>We have language bindings in Shell! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="api-version">API Version</h1>

<p>We have only 1 version of API now in Phrenzi,
but we are going to increse the API version in the future if we need to.
So it is better to claim the version of API you are going to call,
by inserting a special header item in every of your request.</p>

<aside class="success">If client do not specify the api version, then server will assume that client want to request latest version of API. </aside>

<blockquote>
<p>To specify the version of API, simply insert a header <code class="prettyprint">ACCEPT</code>, with a value with <code class="prettyprint">phrenzi.v#{version_of_api}</code>, example:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api_endpoint"</span> <span class="se">\</span>
  -H <span class="s2">"ACCEPT: phrenzi.v1"</span> <span class="se">\</span>
</code></pre>

<h1 id="authentication">Authentication</h1>

<p>We take security as a first priority, so following security mechanism is under consider during design API:</p>

<ul>
<li>we use securely compared ( to protect against timing attacks )</li>
<li>token is invalidate in 1 hour</li>
<li>refresh token mechanism provided to refresh token</li>
</ul>

<p>There&rsquo;s 3 kind of token in Phrenzi for now: App token, Patron Token, Manager Token</p>

<h2 id="app-token">APP TOKEN</h2>

<p>For some public facing api, like patron sign in, patron sign up, request to reset password,  and manager sign in,</p>

<p>it&rsquo;s better to add basic level protection as well, by predefine App Token, and inserting a
<code class="prettyprint">Authorization</code> header with App Token in your request header for public facing api, we can block anonymous attack.</p>

<p>For the correct App Token, please contact admin of Phrenzi.</p>

<blockquote>
<p>Token Authenticated by insert a <code class="prettyprint">Authorization</code> header in your api request, following example is a call to patron sign in with App Token inserted.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/patrons/sign_in"</span> <span class="se">\</span>
  -H <span class="s2">"ACCEPT: phrenzi.v1"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span>
</code></pre>

<h2 id="patron-token">Patron Token</h2>

<p>For api under <code class="prettyprint">patron_app</code> namespace, it is protected by Patron Token:</p>

<ul>
<li>Patron Token consist of a pair of tokens: <code class="prettyprint">token</code> and <code class="prettyprint">refresh_token</code></li>
<li><code class="prettyprint">token</code> have 1 hour lifespan, and <code class="prettyprint">refresh_token</code> have 1 month lifespan</li>
<li>client use <code class="prettyprint">token</code> to consume api</li>
<li>if <code class="prettyprint">token</code> is expired, then client need to use <code class="prettyprint">refresh_token</code> to refresh token and exchange new pair of Patron Token</li>
</ul>

<p>For the correct Patron Token, you can retrieve it by authenticate email &amp; password using Patron login api.</p>

<h2 id="manager-token">Manager Token</h2>

<p>For api under <code class="prettyprint">management</code> namespace, it is protected by Manager Token:</p>

<ul>
<li>Manager Token consist of a pair of tokens: <code class="prettyprint">token</code> and <code class="prettyprint">refresh_token</code></li>
<li><code class="prettyprint">token</code> have 1 hour lifespan, and <code class="prettyprint">refresh_token</code> have 1 month lifespan</li>
<li>client use <code class="prettyprint">token</code> to consume api</li>
<li>if <code class="prettyprint">token</code> is expired, then client need to use <code class="prettyprint">refresh_token</code> to refresh token and exchange new pair of Manager Token</li>
</ul>

<p>For the correct Manager Token, you can retrieve it by authenticate email &amp; password using Manager login api.</p>

<h1 id="link-response-header">Link Response Header</h1>

<p>For some api, there might to too much data to return in one single response, so we paginate result,
and provide link for <code class="prettyprint">next</code> ( next page ), <code class="prettyprint">prev</code> ( previous page ), or <code class="prettyprint">first</code> ( first page ), and <code class="prettyprint">last</code> ( last page ) in the response header. Consumer of Phrenzi api don&rsquo;t need to construct the api string, everything is under response header, example on the right:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl --include <span class="s1">'https://phrenzi.com/managements/patrons?page=5'</span>
HTTP/1.1 200 OK
Link: &lt;http://localhost:3000/movies?page<span class="o">=</span>1&gt;; <span class="nv">rel</span><span class="o">=</span><span class="s2">"first"</span>,
  &lt;http://localhost:3000/movies?page<span class="o">=</span>173&gt;; <span class="nv">rel</span><span class="o">=</span><span class="s2">"last"</span>,
  &lt;http://localhost:3000/movies?page<span class="o">=</span>6&gt;; <span class="nv">rel</span><span class="o">=</span><span class="s2">"next"</span>,
  &lt;http://localhost:3000/movies?page<span class="o">=</span>4&gt;; <span class="nv">rel</span><span class="o">=</span><span class="s2">"prev"</span>
Total: 4321
Per-Page: 10
Page: 5
</code></pre>

<h2 id="header-properties">Header Properties</h2>

<p>there&rsquo;s a few properties in response headers:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Link</td>
<td>the navigation links</td>
</tr>
<tr>
<td>Per-Page</td>
<td>number of result per page</td>
</tr>
<tr>
<td>Page</td>
<td>current page</td>
</tr>
<tr>
<td>Total</td>
<td>Total result</td>
</tr>
</tbody></table>

<h2 id="library-support">Library support</h2>

<p>for iOS: <a href="https://github.com/kylef/WebLinking.swift">WebLinking.swift</a></p>

<h1 id="staff-id-request-header">Staff-Id Request Header</h1>

<p>Mostly of the APIs for iPad Companion are not only protected by manager token, but also are staff protected as well, one can only access those api after sign-in as Manager, and then select one of staff to do operations, such as create transaction, confirm task booster. Those APIs using <code class="prettyprint">X-Staff-Id</code> as a header in the request to represent the currently loged-in staff, this is so-call Staff-Id header. Example on the right:</p>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/patrons"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span>
</code></pre>

<p>Noted that example on the right, this api need Manager token, and Staff-Id Header at the same time.</p>

          <h1 id="json-objects">JSON Objects</h1>

<p>normally, a api response in Phrenzi, will be somehow like this in the right hand side :</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"object_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object_attribute_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABCCDD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"object_attribute_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Simon"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"object_attribute_c"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc@exmaple.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"object_attribute_d"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234.22"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>In <code class="prettyprint">object_name</code> tag, it represent the important part for client to consuming, either a json object, or
Array of json objects. It would be easier for us to classify different json object from Phrenzi api
returned, so we list all the different json object here:</p>

<h2 id="patron">Patron</h2>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&lsquo;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>uniq identifier of Patron</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>&#39;Simon Iong&rsquo;</td>
<td>the name of Patron</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>&ldquo;abc@example.com&rdquo;</td>
<td>the email from Patron</td>
</tr>
<tr>
<td>credit_balance</td>
<td>String</td>
<td>&#39;123.22&rsquo;</td>
<td>the current avaliable balance by Patron &amp; Establishment</td>
</tr>
<tr>
<td>trans_code</td>
<td>String</td>
<td>&ldquo;asdfw1&rdquo;</td>
<td>6 digit trans code, unique identifier for Patron</td>
</tr>
</tbody></table>

<p>Noted that for every patron, could have different credit_balance in different Establishment</p>

<h2 id="manager">Manager</h2>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>uniq identifier of Manager</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>&#39;Simon Iong&rsquo;</td>
<td>the name of Manager</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>&#39;abc@example.com&rsquo;</td>
<td>the email from Manager</td>
</tr>
<tr>
<td>establishment_name</td>
<td>String</td>
<td>&#39;Awesome Bar&rsquo;</td>
<td>the establishment name of this Manager</td>
</tr>
</tbody></table>

<h2 id="establishment">Establishment</h2>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>uniq identifier of Establishment</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>&#39;Awesome Bar&rsquo;</td>
<td>the name of Establishment</td>
</tr>
<tr>
<td>phone</td>
<td>String</td>
<td>&#39;123434123&rsquo;</td>
<td>the phone contact for Establishment</td>
</tr>
<tr>
<td>cash_back</td>
<td>String</td>
<td>&#39;3.5&rsquo;</td>
<td>the current cash back setting</td>
</tr>
<tr>
<td>desc</td>
<td>String</td>
<td>&#39;asdfsad&rsquo;</td>
<td>the desc for Establishment</td>
</tr>
<tr>
<td>logo_url</td>
<td>String</td>
<td>&#39;http://abc.com/logo.img&rsquo;</td>
<td>logo url</td>
</tr>
<tr>
<td>banner_url</td>
<td>String</td>
<td>&#39;http://abc.com/banner.img&rsquo;</td>
<td>logo url</td>
</tr>
<tr>
<td>address</td>
<td>Address object</td>
<td>see below</td>
<td>the address object attached to this establishment</td>
</tr>
<tr>
<td>business_hours</td>
<td>Array of Business Hour</td>
<td>see below</td>
<td>totally 7 business hour object</td>
</tr>
</tbody></table>

<h2 id="address">Address</h2>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>uniq identifier of Address</td>
</tr>
<tr>
<td>street1</td>
<td>String</td>
<td>&#39;Ma Wan MainRold&rsquo;</td>
<td>the street1 for Establishment</td>
</tr>
<tr>
<td>street2</td>
<td>String</td>
<td>&#39;Ma Wan&rsquo;</td>
<td>the street2 for Establishment</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>&#39;Hong Kong&rsquo;</td>
<td>city for Establishment</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>&#39;HK&rsquo;</td>
<td>country name for ISO 3166-1 standard</td>
</tr>
</tbody></table>

<h2 id="business-hour">Business Hour</h2>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>open_time</td>
<td>Integer</td>
<td>43200</td>
<td>the integer represent the seconds start from mid night, range from 0..86400</td>
</tr>
<tr>
<td>close_time</td>
<td>Integer</td>
<td>63200</td>
<td>the integer represent the seconds start from mid night, range from 0..129600, means, until 12pm next day</td>
</tr>
<tr>
<td>wday</td>
<td>Integer</td>
<td>1</td>
<td>integer represent the day in the week, 0 for sunday, 1 for monday, etc</td>
</tr>
<tr>
<td>closed</td>
<td>Boolean</td>
<td>false</td>
<td>true/false, true stands for establishment is close this day</td>
</tr>
</tbody></table>

<h2 id="transaction">Transaction</h2>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>uniq identifier of Transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;eebd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>UUID for patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ffbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>UUID for establishment</td>
</tr>
<tr>
<td>challenge_id</td>
<td>UUID</td>
<td>&#39;ffbd0c3c-404d-4ce1-9042-9baecb4ef585&rsquo;</td>
<td>UUID for challenge, can be NILL</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction, either &#39;sale&rsquo;, or &#39;credit&rsquo;, or &#39;correction&rsquo;</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;200.00&rsquo;</td>
<td>different meaning for different scenarios</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>the applied credit to used from credit account</td>
</tr>
<tr>
<td>sales_credit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>the cash-back from sales_amount</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>sales_credit - applied_credit</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>at the timing of create transaction, the credit_balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>true</td>
<td>true means this transaction is already been deleted</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-05T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string, the timestamp that this transaction is being deleted</td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>&ldquo;ggbd0c3c-404d-4ce1-9042-9baecb4ef585&rdquo;</td>
<td>UUID of origin delete transaction</td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase&rsquo;</td>
<td>action name for transaction</td>
</tr>
</tbody></table>

<p>NOTED:</p>

<ul>
<li>if a transaction A is deleted by api, then a reverted transaction B is created. Both transaction A &amp; B exists in Database, transaction A is called <code class="prettyprint">origin deleted transaction</code>, transaction B is called <code class="prettyprint">reverted deleted transaction</code></li>
<li>server response json object order by tracked_at descending order.</li>
<li>Client identify <code class="prettyprint">reverted deleted transaction</code> by <code class="prettyprint">deleted_at</code>.

<ul>
<li>If transaction <code class="prettyprint">deleted_at</code> is present, means that this transaction is <code class="prettyprint">reverted deleted transaction</code>, one can reference <code class="prettyprint">origin deleted transaction</code> by <code class="prettyprint">del_transaction_id</code></li>
<li><code class="prettyprint">reverted deleted transaction</code> and <code class="prettyprint">origin deleted transaction</code> have the same <code class="prettyprint">tracked_at</code></li>
<li>If <code class="prettyprint">deleted_at</code> is populated, then <code class="prettyprint">deleted</code> should be true</li>
<li>if <code class="prettyprint">deleted_at</code> is populated, and client need to display datetime of this record somewhere, then should use <code class="prettyprint">deleted_at</code> instead of <code class="prettyprint">tracked_at</code>.</li>
</ul></li>
<li>if transaction <code class="prettyprint">deleted</code> is false, means client call <code class="prettyprint">delete transaction</code> api to delete this transaction</li>
</ul>

<h3 id="scenario-1-fully-sale-record">Scenario 1: fully sale record:</h3>

<p>sale amount is 200, cash_back setting is 3.5%, then earned credit 7.00</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcd&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction, either &#39;sale&rsquo;, or &#39;credit&rsquo;, or &#39;correction&rsquo;</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;200.00&rsquo;</td>
<td>the sale amount of this transaction</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>the credit patron get from this transaction</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<h3 id="scenario-2-partially-credit-redeem">Scenario 2: Partially credit redeem:</h3>

<p>sale amount is 200, 125 credit redeemed, then sale &amp; credit record would be:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcde&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;75.00&rsquo;</td>
<td>in this case, we deduct 125 credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;2.6&rsquo;</td>
<td>75 * 0.035 = 2.625 ~&gt; 2.6</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&#39;2.6&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;202.60&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcdf&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;credit&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;125.00&rsquo;</td>
<td>the sale amount redeem by credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&rsquo;-125.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;4.4&rsquo;</td>
<td>125 * 0.035 = 4.375 ~&gt; 4.4</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&rsquo;-120.6&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;82.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Credit Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<h3 id="scenario-3-fully-credit-redeem">Scenario 3: Fully credit redeem:</h3>

<p>sale amount is 200, 200 credit redeemed, then there is no sale record, only credit record.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcdg&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;credit&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;200.00&rsquo;</td>
<td>the sale amount redeem by credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&rsquo;-200.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;7.0&rsquo;</td>
<td>200 * 0.035 = 7</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&rsquo;-193.0&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Credit Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<h3 id="scenario-4-credit-correct">Scenario 4: Credit correct:</h3>

<p>manager decide to deduct 200 credit balance for Patron.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcdh&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;correction&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the sale amount redeem by credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;0.0&rsquo;</td>
<td>cash-back generated from sales_amount</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&rsquo;-200.00&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;100.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Credit Correciton&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<h3 id="scenario-5-delete-full-sale-record-from-scenario-1">Scenario 5: Delete Full Sale Record from Scenario 1</h3>

<p>Original Sale transaction</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcd&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction, either &#39;sale&rsquo;, or &#39;credit&rsquo;, or &#39;correction&rsquo;</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;200.00&rsquo;</td>
<td>the sale amount of this transaction</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>the credit patron get from this transaction</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;7.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<p>Reverted Sale transaction</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcd2&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction, either &#39;sale&rsquo;, or &#39;credit&rsquo;, or &#39;correction&rsquo;</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&rsquo;-200.00&rsquo;</td>
<td>the sale amount of this transaction</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&rsquo;-7.00&rsquo;</td>
<td>the credit patron get from this transaction</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&rsquo;-7.00&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;100.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-05T07:48:56.050Z&rdquo;</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>&ldquo;abcd&rdquo;</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase Deletion&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<h3 id="scenario-6-delete-partial-sale-record-from-scenario-2">Scenario 6: Delete Partial Sale Record from Scenario 2</h3>

<p>Original Sale Transaction</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcde&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;75.00&rsquo;</td>
<td>in this case, we deduct 125 credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;2.6&rsquo;</td>
<td>75 * 0.035 = 2.625 ~&gt; 2.6</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&#39;2.6&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;202.60&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<p>Original Credit Transaction</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcdf&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;credit&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&#39;125.00&rsquo;</td>
<td>the sale amount redeem by credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&rsquo;-125.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&#39;4.4&rsquo;</td>
<td>125 * 0.035 = 4.375 ~&gt; 4.4</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&rsquo;-120.6&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;82.00&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Credit Purchase&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<p>Reverted Sale transaction</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcde2&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;sale&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&rsquo;-75.00&rsquo;</td>
<td>in this case, we deduct 125 credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;0.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&rsquo;-2.6&rsquo;</td>
<td>75 * 0.035 = 2.625 ~&gt; 2.6</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&rsquo;-2.6&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;152.6&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-05T07:48:56.050Z&rdquo;</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>&#39;abcde&rsquo;</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Cash Purchase Deletion&rsquo;</td>
<td></td>
</tr>
</tbody></table>

<p>Reverted Credit transaction</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>UUID</td>
<td>&#39;abcdf2&rsquo;</td>
<td>UUID of transaction</td>
</tr>
<tr>
<td>patron_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>establishment_id</td>
<td>UUID</td>
<td>&#39;ADSSDD&rsquo;</td>
<td>UUID of establishment</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>&#39;credit&rsquo;</td>
<td>type of transaction</td>
</tr>
<tr>
<td>sale_amount</td>
<td>String</td>
<td>&rsquo;-125.00&rsquo;</td>
<td>the sale amount redeem by credit</td>
</tr>
<tr>
<td>applied_credit</td>
<td>String</td>
<td>&#39;125.00&rsquo;</td>
<td>the applied credit from credit account</td>
</tr>
<tr>
<td>sales_crecit</td>
<td>String</td>
<td>&rsquo;-4.4&rsquo;</td>
<td>125 * 0.035 = 4.375 ~&gt; 4.4</td>
</tr>
<tr>
<td>credit_subtotal</td>
<td>String</td>
<td>&#39;120.6&rsquo;</td>
<td>total credit earned from this transaction</td>
</tr>
<tr>
<td>remaining_credit</td>
<td>String</td>
<td>&#39;273.2&rsquo;</td>
<td>after create this transaction, total balance in credit account</td>
</tr>
<tr>
<td>tracked_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-04T07:48:56.050Z&rdquo;</td>
<td>ISO_8601 format datetime string</td>
</tr>
<tr>
<td>deleted_at</td>
<td>Datetime</td>
<td>&ldquo;2016-06-05T07:48:56.050Z&rdquo;</td>
<td></td>
</tr>
<tr>
<td>deleted</td>
<td>Boolean</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>del_transaction_id</td>
<td>UUID</td>
<td>&#39;abcdf&rsquo;</td>
<td></td>
</tr>
<tr>
<td>action</td>
<td>String</td>
<td>&#39;Credit Purchase Deletion&rsquo;</td>
<td></td>
</tr>
</tbody></table>

          <h1 id="patrons">Patrons</h1>

<h2 id="sign-up">Sign Up</h2>
<pre class="highlight shell"><code>curl <span class="s2">"http://phrenzi.com/api/patrons"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
        "first_name": "Simon",
        "last_name": "Iong",
        "email": "abc@gmail.com",
        "password": "password",
        "password_confirmation": "password",
        "confirm_success_url": "phrenzi://"
        }'</span>
</code></pre>

<blockquote>
<p>if success, the above command returns HTTP Status Code <code class="prettyprint">200</code> with following json objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37f335c5-a88c-41a3-a643-fba688c72897"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Simon"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iong"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8cc897"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, the above command returns HTTP Status Code <code class="prettyprint">422</code> with following json objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Email has already been taken"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint try to register a account for Patron, and need App Token authenticate.</p>

<ul>
<li>if success, it will return HTTP Status Code <code class="prettyprint">200</code> with <code class="prettyprint">Patron</code> json object</li>
<li>if failed, it will return HTTP Status Code <code class="prettyprint">422</code>, and with <code class="prettyprint">errors</code> json message</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/patrons</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>the first name of patron</td>
</tr>
<tr>
<td>last_name</td>
<td>the last name of patron</td>
</tr>
<tr>
<td>email</td>
<td>the email of patron</td>
</tr>
<tr>
<td>password</td>
<td>the password of patron account</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>confirm password again</td>
</tr>
<tr>
<td>confirm_success_url</td>
<td>the url after confirmation link is click</td>
</tr>
</tbody></table>

<h2 id="sign-in">Sign In</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patrons/sign_in"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
        "email": "abc@gmail.com",
        "password": "password" }'</span>
</code></pre>

<blockquote>
<p>if success, the above command returns <code class="prettyprint">Patron</code> object with <code class="prettyprint">200</code> status code, and structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"288f4f0f-da30-45c4-a531-c0a804628395"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Simon Iong"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Simon"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iong"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76efd7"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f1b811b47dc44cbeb8a03b9021f76ac4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_exp_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506672320</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2c74332c27df44b884b06714f0110f23"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token_exp_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1509177920</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, the above command returns status code <code class="prettyprint">401</code> and json structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Invalid login credentials. Please try again."</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if patron is not confirmed yet, return status code <code class="prettyprint">401</code> and json like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A confirmation email was sent to your account at 'abc@gmail.com'. You must follow the instructions in the email before your account can be activated"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint try to authenticate Patron, and need App Token authenticate.</p>

<ul>
<li>if success, it will return <code class="prettyprint">Patron</code> object with HTTP Status Code <code class="prettyprint">200</code>, and client can retrive
Patron Token pair from reponse to consuming <code class="prettyprint">patron_app</code> namespace APIs.</li>
<li>if failed to authenticate, it will return HTTP Status Code <code class="prettyprint">401</code> with <code class="prettyprint">errors</code> message.</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patrons/sign_in</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>the email of patron account</td>
</tr>
<tr>
<td>password</td>
<td>the password of patron account</td>
</tr>
</tbody></table>

<h2 id="sign-out">Sign Out</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patrons/sign_out"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>if success, the above command returns status code <code class="prettyprint">200</code>, and json object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"successfully logout!"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, the above command returns status code <code class="prettyprint">404</code>, and errors json like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"User was not found or was not logged in."</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>this endpoint need <code class="prettyprint">Patron Token</code> to authenticate patron,
you can retrieve it from Patron <code class="prettyprint">Sign In</code> api request, or Patron <code class="prettyprint">Token</code> api.</p>

<ul>
<li>if success, it will return HTTP Status Code <code class="prettyprint">200</code></li>
<li>if failed to authenticate, it will return HTTP Status Code <code class="prettyprint">404</code> with <code class="prettyprint">errors</code> message.</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/patrons/sign_out</code></p>

<h2 id="confirmation-patron">Confirmation Patron</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patrons/confirmation"</span> <span class="se">\</span>
  -X GET
  -d <span class="s1">'{
    "confirmation_token": "abcasdfasd",
    "redirect_url": "phrenzi://",
    }'</span>
</code></pre>

<blockquote>
<p>if success, it will redirect to the <code class="prettyprint">redirect_url</code> specify in this api</p>

<p>if failed, it will raise an exception ActionController::RoutingError</p>
</blockquote>

<p>during sign up procedure of patron ( client call Patron sign up API ),
server will sent out a confirmation email to Patron&rsquo;s mailbox,
patron will need to click a link in that email,
there&rsquo;s a generated confirmation_token in there, which will be use to call
in this endpoint.</p>

<aside class="warning">Client don&rsquo;t need to call this API.</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patrons/confirmation</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>confirmation_token</td>
<td>the confirmation token for patron</td>
</tr>
<tr>
<td>redirect_url</td>
<td>the params is pass-in from patron sign up API</td>
</tr>
</tbody></table>

<h2 id="request-reset-password">Request Reset Password</h2>
<pre class="highlight shell"><code>curl <span class="s2">"http://example.com/api/patrons/password"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
        "email": "abc@gmail.com" }'</span>
        <span class="s2">"redirect_url"</span>: <span class="s2">"phrenzi://"</span> <span class="o">}</span><span class="s1">'
</span></code></pre>

<blockquote>
<p>if success, return HTTP Status Code <code class="prettyprint">200</code> without following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"An email has been sent to 'abc@gmail.com' containing instructions for resetting your password."</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if email not found, return HTTP Status Code `404, with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Unable to find user with email 'abc@gmail.com.'"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if email is missing, return HTTP Status Code <code class="prettyprint">401</code>, with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"You must provide an email address."</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if redirect_url is missing, return HTTP Status Code <code class="prettyprint">401</code>, with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Missing redirect URL."</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api need App Token authenticated and is used while Patron forget password, and after this api is invoked and is success, a email
will trigger and sent to Patron&rsquo;s registered email.</p>

<ul>
<li>if success, it will return HTTP Status Code <code class="prettyprint">200</code> without json object</li>
<li>if email is missing, it will return HTTP Status Code <code class="prettyprint">401</code></li>
<li>if redirect_url is missing, it will return HTTP Status Code <code class="prettyprint">401</code></li>
<li>if email is not found in server, it will return HTTP Status Code <code class="prettyprint">404</code></li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/patrons/password</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>the email of patron</td>
</tr>
<tr>
<td>redirect_url</td>
<td>the url that is used within reset password email to redirect back to app</td>
</tr>
</tbody></table>

<h2 id="password-reset-link">Password Reset Link</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patrons/password/edit"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -d <span class="s1">'{
    "reset_password_token": "abcasdfasd",
    "redirect_url": "phrenzi://"
    }'</span>
</code></pre>

<blockquote>
<p>if success, it will redirect to the <code class="prettyprint">redirect_url</code> specify in this api, and with Patron&rsquo;s token attached</p>
</blockquote>
<pre class="highlight shell"><code>phrenzi://?token<span class="o">=</span>xxxxx
</code></pre>

<blockquote>
<p>if failed, it will return with status_code 404, and folloing json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"not found!"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>during password reset procedure of patron ( client call Patron request password reset API ), server
will sent out a password reset email to Patron&rsquo;s mailbox,
patron will need to click a link in that email,
which will trigger this call if Patron click that link.
If every thing is fine, Patron will redirect to app,
with Patron token&rsquo;s <code class="prettyprint">token</code> in a request, then App can
retrieve <code class="prettyprint">token</code> from that redirect request.</p>

<aside class="warning">Client don&rsquo;t need to call this API.</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/patrons/password/edit</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>reset_password_token</td>
<td>reset password token</td>
</tr>
<tr>
<td>redirect_url</td>
<td>a link to redirect back after success operation</td>
</tr>
</tbody></table>

<h2 id="update-password">Update Password</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patrons/password"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "password": "new_password",
    "password_confirmation": "new_password"
    }'</span>
</code></pre>

<blockquote>
<p>if success, it will response with http status code <code class="prettyprint">200</code>, and with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Your password has been successfully updated."</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, for example, password mismatch, response with http status code <code class="prettyprint">422</code>,
and with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Missing password or password_confirmation."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if not authenticate, response with <code class="prettyprint">401</code> and following json object,</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Unauthorized"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api endpoint need <code class="prettyprint">Patron Token</code> authenticated.</p>

<ul>
<li>if success, response with http status code <code class="prettyprint">200</code></li>
<li>if authenticate failed, response with http status code <code class="prettyprint">401</code></li>
<li>if validation failed, for example, passsord mismatch, response with http status code <code class="prettyprint">422</code></li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/patrons/password</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>the new password of patron</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>confirm again the new password</td>
</tr>
</tbody></table>

<h2 id="token-exchange">Token Exchange</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patrons/token"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X POST
</code></pre>

<blockquote>
<p>if success, it will response with http status code <code class="prettyprint">200</code>, and with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"314e7168-fe41-4d67-b945-209a3439d7f0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patron1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patron"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last Name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patron1@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec6eec"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"918cf11feba34a58a2f4b8860fb87c60"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_exp_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506677658</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c6246969fdbb4013a41d5ed04f26e491"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token_exp_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1509183258</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, for example, refresh token is missing or not found, or even refresh token is valid, but expired, response with http status code <code class="prettyprint">401</code>,
and with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"You need to sign in or sign up before continuing."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api endpoint authenticated by <code class="prettyprint">Patron Token</code>&rsquo;s <code class="prettyprint">refresh_token</code>, and will exchange with a new pair of <code class="prettyprint">Patron Token</code></p>

<ul>
<li>if success, response with http status code <code class="prettyprint">200</code></li>
<li>if authenticate failed, response with http status code <code class="prettyprint">401</code></li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/patrons/token</code></p>

          <h1 id="managers">Managers</h1>

<h2 id="sign-in">Sign In</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/managers/sign_in"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
        "email": "abc@gmail.com",
        "password": "password" }'</span>
</code></pre>

<blockquote>
<p>if success, the above command returns <code class="prettyprint">Manager</code> object with <code class="prettyprint">200</code> status code, and structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"manager"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6b586aeb-a53d-476a-9435-659ed9547e6e"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"establishment_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Bar"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"establishment_setup"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"494a1cff589247d2a0c5375033ac4314"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_exp_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-30T04:50:10Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a0d4a8c0c47341dc8acc725f66a9bfe8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token_exp_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-29T04:50:10Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, the above command returns status code <code class="prettyprint">401</code> and json structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Invalid login credentials. Please try again."</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if manager is not confirmed yet, return status code <code class="prettyprint">401</code> and json like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A confirmation email was sent to your account at 'abc@gmail.com'. You must follow the instructions in the email before your account can be activated"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint try to authenticate Manager, and need App Token authenticated.</p>

<ul>
<li>if success, it will return <code class="prettyprint">Manager</code> object with HTTP Status Code <code class="prettyprint">200</code>, and client can retrive
auth header from reponse to consuming next request that need authentication.</li>
<li>if failed to authenticate, it will return HTTP Status Code <code class="prettyprint">401</code> with <code class="prettyprint">errors</code> message.</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/managers/sign_in</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>the email of manager account</td>
</tr>
<tr>
<td>password</td>
<td>the password of manager account</td>
</tr>
</tbody></table>

<h2 id="sign-out">Sign Out</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/managers/sign_out"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>if success, the above command returns status code <code class="prettyprint">200</code>, and json object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"successfully logout!"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, either token is missing, token is expired, or token not found, the above command returns status code <code class="prettyprint">401</code>, and errors json like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"You need to sign in or sign up before continuing."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>this endpoint authenticated by <code class="prettyprint">Manager Token</code>, you are going to get it from Manager <code class="prettyprint">Sign In</code> api request.</p>

<ul>
<li>if success, it will return HTTP Status Code <code class="prettyprint">200</code></li>
<li>if failed to authenticate, it will return HTTP Status Code <code class="prettyprint">404</code> with <code class="prettyprint">errors</code> message.</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/managers/sign_out</code></p>

          <h1 id="patronapp-profile-image">PatronApp / Profile Image</h1>

<h2 id="pre-sign-url">pre-sign url</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/patron_profile/cache/presign"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzistaging.s3-ap-southeast-1.amazonaws.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"fields"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"policy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJleHBpcmF0aW9uIjoiMjAxNi0xMi0wOVQxMDoyNzozMVoiLCJjb25kaXRpb25zIjpbeyJidWNrZXQiOiJwaHJlbnppc3RhZ2luZyJ9LHsia2V5IjoiY2FjaGUvMmE3OGI3MWI2MGYwMmZjMDk3YzFhYWM1ZTA0MDkxMzgifSx7IngtYW16LWNyZWRlbnRpYWwiOiJBS0lBSlhNM1U3QU02STNPRTM2QS8yMDE2MTIwOS9hcC1zb3V0aGVhc3QtMS9zMy9hd3M0X3JlcXVlc3QifSx7IngtYW16LWFsZ29yaXRobSI6IkFXUzQtSE1BQy1TSEEyNTYifSx7IngtYW16LWRhdGUiOiIyMDE2MTIwOVQwOTI3MzFaIn1dfQ=="</span><span class="p">,</span><span class="w">
      </span><span class="nt">"x-amz-algorithm"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS4-HMAC-SHA256"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"key"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cache/2a78b71b60f02fc097c1aac5e0409138"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"x-amz-signature"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"52956151623087d2a4997462c90055d61e51de3b1a5b8d89f826f1769da3894f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"x-amz-date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"20161209T092731Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"x-amz-credential"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AKIAJXM3U7AM6I3OE36A/20161209/ap-southeast-1/s3/aws4_request"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves pre-sign url for upload image into s3</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/patron_profiile/cache/presign</code></p>

<p>After you retrive the presign url, you could be able to make a post request to presign url with the fields this end-point provided. Then you could be able to retrieve an id from S3. Please construct a json object with this id, and this object will going to be used in next API call to create the actual profile image in Phrenzi</p>

<p>For more detail, please visit shrine&rsquo;s plugin <a href="http://shrinerb.com/rdoc/files/doc/direct_s3_md.html">direct_upload</a></p>

<h2 id="update-patron-profile">update patron profile</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/profile"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
        "profile": '</span><span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"349234854924394"</span>, <span class="c"># required</span>
          <span class="s2">"storage"</span>: <span class="s2">"cache"</span>, <span class="c"># required</span>
          <span class="s2">"metadata"</span>: <span class="o">{</span>
            <span class="s2">"size"</span>: 45461, <span class="c"># optional</span>
            <span class="s2">"filename"</span>: <span class="s2">"foo.jpg"</span>, <span class="c"># optional</span>
            <span class="s2">"mime_type"</span>: <span class="s2">"image/jpeg"</span>, <span class="c"># optional</span>
          <span class="o">}</span>
        <span class="o">}</span><span class="s1">',
        "first_name": "Simon",
        "last_name": "Iong",
        "email": "manin.iong@gmail.com",
        "reconfirm_success_url": "phrenzi://"
      }'</span>
</code></pre>

<blockquote>
<p>The above command returns status code 200</p>

<p>either name, email, or profile need to provided in this api, if none of them is provided, then return error code 422, and following json result:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"either email, name, profile need to be provided for update profile action"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if email is provided, then reconfirm_success_url need to provided as well, orelse server will return error code 422, and following json result:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"reconfirmation_success_url and email should be provided at the same time"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code>, and upate patron profile</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://example.com/api/patron_app/profile</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>profile</td>
<td>String, json object string demonstrated above</td>
</tr>
<tr>
<td>first_name</td>
<td>String, first name of current login Patron</td>
</tr>
<tr>
<td>last_name</td>
<td>String, last name of current login Patron</td>
</tr>
<tr>
<td>email</td>
<td>String, new email of current login Patron</td>
</tr>
<tr>
<td>reconfirm_success_url</td>
<td>after new email is confirmed, specify the url to redirect to, if email is present, reconfirm_success_url must be present.</td>
</tr>
</tbody></table>

<p>NOTED:</p>

<ol>
<li>for <code class="prettyprint">profile</code> json object, <code class="prettyprint">id</code> &amp; <code class="prettyprint">storage</code> is required in json object string</li>
<li><code class="prettyprint">profile</code>, <code class="prettyprint">first_name</code>, <code class="prettyprint">last_name</code>, <code class="prettyprint">email</code> must have at least one present in the payload.</li>
</ol>

<p>For full scenario of upload profile with pre-sign, please refer
<a href="https://github.com/Phrenzi/phrenzi_web/blob/master/spec/requests/api/v1/patron_app/patron_profile_spec.rb">here</a></p>

<h3 id="the-flow-for-update-email">The flow for update email</h3>

<ol>
<li>current patron call update profile api, with <code class="prettyprint">email</code> &amp; <code class="prettyprint">reconfirm_success_url</code> payload.</li>
<li>server return success, and at the same time, send a confirmatino email to new email inbox</li>
<li>At this time being, patron is still authenticated ( not force logout ), patron can still login using old email</li>
<li>Patron go to new email inbox, click the click there, this will trigger a confirmation request in the server, and patron will redirect to the url specify in <code class="prettyprint">reconfirm_success_url</code> payload.</li>
<li>At this time being, patron can not login using old email but the new one.</li>
</ol>

<h2 id="patron-profile">patron profile</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/profile"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: app_token"</span>
</code></pre>

<blockquote>
<p>The above command returns status code 200, and following json</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d3982f8e-93b0-4be9-9a4d-2ed12d591992"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patron1@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"197a14"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzi.com/uploads/cache/a8a70be864925f7bddc0bcf93fa89986.jpeg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"join_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-29T16:34:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"challenge_played"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_won"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"prize_earned"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23.23"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point_earned"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_earned_from_correction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_loss_from_correction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_earned_from_cash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_spent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_earned_from_deletion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_loss_from_deletion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_earned_from_prize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code>, and retrieve current authenticated patron profile</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/profile</code></p>

          <h1 id="patronapp-patrons">PatronApp / Patrons</h1>

<h2 id="get-all-patrons">Get all patrons</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/patrons"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Patron</code> object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patrons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abfd977f-9f3c-41ef-b920-730ab0adabdc"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"David"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzi.com/uploads/cache/a8a70be864925f7bddc0bcf93fa89986.jpeg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"join_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-29T16:34:46Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"favorite_establishments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"551136c7-11dd-449d-abd1-047f49c0229e"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Roma"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uploads/cache/6f6c813b759d1356b4df3d708cc67b43.jpeg"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d0d5cbe6-9319-4f5e-accc-54ad85826054"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Bar"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uploads/cache/3f07b695b94bfbfe1a3e9f1086d13db5.jpeg"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"address_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"friend_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"friend"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fc7cb28-a38c-4830-8488-4a8bd68f552a"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kerry"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzi.com/uploads/cache/12370be864925f7bddc0bcf93fa89123.jpeg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"join_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-29T16:34:46Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"favorite_establishments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"friend_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"normal"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>This endpoint require <code class="prettyprint">Patron Token</code> authentication, and retrieves all patrons.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/patron_app/patrons</code></p>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>N</td>
<td>type could be: &lsquo;normal&rsquo;, &#39;pending&rsquo;, &#39;friend&rsquo;, used to filter patron list result</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

          <h1 id="patronapp-friendship">PatronApp / Friendship</h1>

<h2 id="send-friendship-request">Send friendship request</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/friendships"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
  -X POST
  -d <span class="s1">'{
    "to_patron_id": "a9ce92dd-1b1d-498a-b7d0-77fffccd20de"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status code 200 and empty json.</p>

<p>if invited patron is not there, return 422, and json like:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invited Patron is not exist"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if friendship request already been sent out to invited patron, return 422, and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invited Patron has already received your friend request, please wait"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if already been friends, return 422, and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invited Patron is already your friend"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code>, and make friendship request to other patrons.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/friendships</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>to_patron_id</td>
<td>Y</td>
<td>Invited Patron&rsquo;s UUID</td>
</tr>
</tbody></table>

<h2 id="cancel-friendship">Cancel friendship</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/friendships"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
  -X DELETE
  -d <span class="s1">'{
    "to_patron_id": "a9ce92dd-1b1d-498a-b7d0-77fffccd20de"
    }'</span>
</code></pre>

<blockquote>
<p>If okay, return 200 and empty json.</p>

<p>If Invited Patron is not ther, return 422, and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invited Patron is not exist"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If friendship request send out, but invited patron do not accept/reject it yet, return 422 and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invited Patron still not accept your friendship request"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If there&rsquo;s no friendship between current loged in patron &amp; invited patron, return 422 and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invited Patron is not your friend"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code>, and try to cancel friendship established before.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/patron_app/friendship</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>to_patron_id</td>
<td>Y</td>
<td>Invited Patron&rsquo;s UUID</td>
</tr>
</tbody></table>

<h2 id="accept-friendship">Accept friendship</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/friendships/accept"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
  -X POST
  -d <span class="s1">'{
    "host_patron_id": "a9ce92dd-1b1d-498a-b7d0-77fffccd20de"
    }'</span>
</code></pre>

<blockquote>
<p>If okay, return 200 and empty json.</p>

<p>If Host Patron is not there, return 422, and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Patron is not exist"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If friendship is already established, return 422 and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Patron is already your friend"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If host patron do not make any request to current authenticated patron, return 422 and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Patron do not make a friendship request"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code>, and accept friendship request.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/friendship/accept</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>host_patron_id</td>
<td>Y</td>
<td>Host Patron&rsquo;s UUID</td>
</tr>
</tbody></table>

<h2 id="reject-friendship">Reject friendship</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/friendships/reject"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
  -X POST
  -d <span class="s1">'{
    "host_patron_id": "a9ce92dd-1b1d-498a-b7d0-77fffccd20de"
    }'</span>
</code></pre>

<blockquote>
<p>If okay, return 200 and empty json.</p>

<p>If Host Patron is not there, return 422, and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Patron is not exist"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If there is no friendships, return 422 and json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Patron do not make a friendship request"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code>, and reject friendship request.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/friendship/reject</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>host_patron_id</td>
<td>Y</td>
<td>Host Patron&rsquo;s UUID</td>
</tr>
</tbody></table>

          <h1 id="patronapp-establishments">PatronApp / Establishments</h1>

<h2 id="get-all-establishments">get all establishments</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/establishments"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"establishments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Establishment1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"612345671"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cash_back"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is an example description"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/establishment/logo/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/thumb_image.jpeg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"banner_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/establishment/banner/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/thumb_image.jpeg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active_booster_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_active_booster_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20000.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"favorite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c9d3e1c-9499-472c-8f87-9acd0f8866d2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Establishment2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"612345672"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cash_back"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is an example description"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/establishment/logo/0c9d3e1c-9499-472c-8f87-9acd0f8866d2/thumb_image.jpeg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"banner_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/establishment/banner/0c9d3e1c-9499-472c-8f87-9acd0f8866d2/thumb_image.jpeg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active_booster_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_active_booster_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"favorite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint use <code class="prettyprint">Patron Token</code>, and retrieves all establishments.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/establishments</code></p>

<aside class="warning">We will add pagination parameter later, but for this phase, we just skip it.</aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>N</td>
<td>&lsquo;favorite&rsquo; or nothing</td>
</tr>
</tbody></table>

<h2 id="get-establishment">get establishment</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"establishment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"610ce5ee-8ce2-4ad2-9296-3e2bd6ec539a"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Establishment1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"612345671"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cash_back"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is an example description"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/establishment/logo/e1c3c3b9e1bb587672ed14663c233d2a.jpeg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"banner_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/establishment/banner/cf2731b3f037e081fee8230378290b62.jpeg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"active_booster_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_active_booster_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"favorite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54f27047-8a98-4304-b7bc-43b2f855a582"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"street1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"street2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"business_hours"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"wday"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"open_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
        </span><span class="nt">"close_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
        </span><span class="nt">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"current_challenge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-06T16:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-06T16:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prize_percentage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"max_payout_rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total_sales"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ranking"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f9128d9c-a60c-471d-8e22-761bc0a0a785"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patron2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"join_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-07T12:30:01Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/patron/profile/cf2731b3f037e081fee8230378290b62.jpeg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"point_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ranking"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"prize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8d7c84fd-c6d1-4c02-b7b6-e5a3d6eebacd"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patron1"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last1"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"join_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-07T12:30:01Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://abc.com/uploads/patron/profile/cf2731b3f037e081fee8230378290b62.jpeg"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"point_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ranking"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"prize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint use <code class="prettyprint">Patron Token</code> and retrieves establishment detail</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea</code></p>

<h2 id="favorite-establishment">favorite establishment</h2>
<pre class="highlight shell"><code>curl
<span class="s2">"https://phrenzi.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/favorite"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X POST
</code></pre>

<blockquote>
<p>if okay, The above command returns status code 200 and empty json;</p>
</blockquote>

<p>This endpoint use <code class="prettyprint">Patron Token</code> and retrieves establishment detail</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/favorite</code></p>

<h2 id="unfavorite-establishment">unfavorite establishment</h2>
<pre class="highlight shell"><code>curl
<span class="s2">"https://phrenzi.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/favorite"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>if okay, The above command returns status code 200 and empty json;</p>
</blockquote>

<p>This endpoint use <code class="prettyprint">Patron Token</code> and retrieves establishment detail</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/favorite</code></p>

          <h1 id="patronapp-sales-transactions">PatronApp / Sales Transactions</h1>

<h2 id="get-all-sales-transactions-by-establishment_id">get all sales transactions by establishment_id</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "establishment_id": "d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3e2d1786-3379-4311-93c4-86ac85cb6fc3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd4820df-0572-4e06-a60b-2411fd450272"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0cd28c0d26"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T19:09:43Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c294a412-b391-44c5-8cc7-25a4f4b1a7b5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd4820df-0572-4e06-a60b-2411fd450272"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8c36accb11"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T19:09:43Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code>, and retrieves all transactions for specific
patron and for specific establishment</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/sales_transactions</code></p>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>establishment_id</td>
<td>Y</td>
<td>establishment_id that transactions belongs to</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

          <h1 id="patronapp-point-transactions">PatronApp / Point Transactions</h1>

<h2 id="get-all-point-transactions-by-establishment_id">get all point transactions by establishment_id</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/point_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "establishment_id": "d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86649ff8-abb4-4e4f-9a64-16607ccac2f4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"437d5272-e694-41cb-8c4f-12c0f37f3588"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4972f2df-d378-4f87-b9c9-ac45ab12d0ac"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.99"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19.99"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"394548216b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase Points"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"correction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-12T03:02:32Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9bea46d0-d077-4d0b-beaa-5b11151601d4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"437d5272-e694-41cb-8c4f-12c0f37f3588"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4972f2df-d378-4f87-b9c9-ac45ab12d0ac"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.99"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19.99"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3ace99530"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase Points"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"correction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-12T03:02:31Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code>, and retrieves all transactions for specific patron and for specific establishment</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/point_transactions</code></p>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>establishment_id</td>
<td>Y</td>
<td>establishment_id that transactions belongs to</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

          <h1 id="patronapp-patron-summary">PatronApp / Patron Summary</h1>

<h2 id="get-patron-summary-for-specify-establishment_id">get patron summary for specify establishment_id</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/establishments/d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b/summary"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "establishment_id": "d51dd6c5-ad0e-445f-b3c5-06ab8ec8624b"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"challenge_played"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"challenge_won"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point_earned"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prize_earned"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_earned_from_correction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_loss_from_correction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_earned_from_cash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_spent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_earned_from_deletion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_loss_from_deletion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_earned_from_prize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code>, and retrieves summary statistic data for current authenticated patron and for establishment specified</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/establishments/:establishment_id/summary</code></p>

          <h1 id="patronapp-boosters">PatronApp / Boosters</h1>

<h2 id="get-all-boosters-today">get all boosters today</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/boosters"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"boosters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74728c5c-bbc1-4212-91e4-037c25eef234"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T05:55:39.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:03:59.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9ecedaf3-9b39-4199-9b8f-b050c144b98d"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T05:57:19.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"check_in_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T04:03:12.000Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f69285c8-0556-4a26-9c53-f0ca8c9e516f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"target_amount"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T05:58:59.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T05:59:49.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"target_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c17a61e-c786-4801-aa5c-2965a94b1585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"target_amount"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:02:15.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:03:05.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"target_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number_of_transaction"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_accumulated_sales"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"not_rewarded_sales"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"accumulated_redeemed_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf15f7c5-ddee-404f-9966-c9feaea36b53"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"target_amount"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:03:12.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:04:02.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"target_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number_of_transaction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_accumulated_sales"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"not_rewarded_sales"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"accumulated_redeemed_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"981a00e6-9dcf-4af0-91a5-74f3f2a81882"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T05:59:49.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:00:49.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"host_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80284ba8-9e0e-447a-bdb7-5ef6b2187c99"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T05:59:59.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-22T06:00:34.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitation_limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"host_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aba9872b-6831-4e7e-ba8e-75b711344ba8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-23T09:56:53.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-23T09:57:53.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"check_in_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-23T17:57:43.605+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"invitation_sent_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"invited_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_claimed_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a81e59-55eb-4f28-8b2f-7f117f06f938"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-23T09:58:43.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-23T09:59:43.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"check_in_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-23T17:59:33.185+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"invitation_sent_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"invited_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_claimed_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"408270e2-31bc-4cb9-9cdd-4a0c6457bf7b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T04:59:11Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"task_desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sing a Song"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T05:03:20Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a3f227c-355a-41f4-bee8-64f19e842bd3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dummy Title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tiered_check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-07T04:59:21Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-07T05:03:20Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"enable_invitation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"host_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1aec2260-a8d6-4022-a6e2-cdfb09ffb1d0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dummy Title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-02T04:59:31Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-02T05:03:20Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cash_back"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code>, and retrieves all boosters, along with booster information connected with current patron</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/establishments/:establishment_id/boosters</code></p>

<aside class="warning">We will add pagination parameter later, but for this phase, we just skip it.</aside>

          <h1 id="patronapp-check-in">PatronApp / Check In</h1>

<h2 id="patron-check-in">patron check in</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/establishments/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/check_in"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "lat": "23.2333",
    "long": "-22.1234"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns status code 200 with response of JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"boosters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"202f96fb-1536-43fa-a6ba-7b0387e90465"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REDEEMED_ALREADY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40be79a4-92b3-447a-aff2-0ab5f9210aca"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REACH_REDEEM_COUNT"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3c7fdf5-8629-4c13-9b86-b911ab86adce"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXPIRED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39c42912-91cf-48dd-abbf-a273da146568"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39c42912-91cf-48dd-abbf-b911ab86adce"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3c7fdf5-91cf-48dd-abbf-b911ab86adce"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3c7fdf5-91cf-48dd-abbf-b911ab86adce"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CHECKED_IN"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If patron&rsquo;s lat &amp; long is closed enough to establishment, return status code 406 and following
JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Current Location is not near enough"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If patron&rsquo;s lat &amp; long have format error, return status code 422 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Lat can't be blank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Long can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If current there&rsquo;s no challenge today, return status code 406 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"There is no active Challenge today"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code> and check in current logined patron into Establishment specify</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/establishments/:establishment_id/check_in</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>NOTED: establishment_id is the uuid of establishment</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>lat</td>
<td>Y</td>
<td>latitude of patron&rsquo;s location, example &lsquo;23.233&rsquo;</td>
</tr>
<tr>
<td>long</td>
<td>Y</td>
<td>longitude of patron&rsquo;s location, example: &rsquo;-23.233&rsquo;</td>
</tr>
</tbody></table>

          <h1 id="patronapp-invitation">PatronApp / Invitation</h1>

<h2 id="invite-patron">Invite Patron</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/boosters/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/invite"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "invitee_patron_id": "202f96fb-1536-43fa-a6ba-7b0387e90465"
    }'</span>
</code></pre>

<blockquote>
<p>if success invited, then returns status code 200 with empty body.</p>

<p>if invitee_patron do not exist, it&rsquo;s validation error, then return status code 422, and following error JSON
response, with error explaination:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invitee patron does not exist"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if patron somehow try to invite himself/herself, it&rsquo;s a validation error, then return status code 422, and following error JSON
response, with error explaination:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"can not invite yourself"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If current authenticated patron is not checked-in, then he is not allow to invite, in this case, return status code 406 and following
JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Can't invite anyone before your check-in"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If invitee is already invited, return status code 406 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Invitee have been invited"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If invitee already checked-in, return status code 406 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Invitee already checked-in"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If host reach invitation limit, return status code 406 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"You have reached invitation limit, can't invite anymore"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code> and create a invitation for current logined patron to patron specify</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/boosters/:booster_id/invite</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>NOTED: booster_id is the uuid of booster, and must be a invitation booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invitee_patron_id</td>
<td>Y</td>
<td>invitee&rsquo;s uuid</td>
</tr>
</tbody></table>

<h2 id="cancel-invitation">Cancel Invitation</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/boosters/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/cancel_invite"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "invitee_patron_id": "202f96fb-1536-43fa-a6ba-7b0387e90465"
    }'</span>
</code></pre>

<blockquote>
<p>if success, then returns status code 200 with empty body.</p>

<p>if there&rsquo;s validation error, then return status code 422, and following error JSON
response, with error explaination:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Invitee patron does not exist"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If invitee is not invited, return status code 406 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Invitee is not invited by you"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If invitee already checked-in, return status code 406 and following JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Invitee already checked-in"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code> and cancel a invitation from current logined patron to patron specify</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/boosters/:booster_id/cancel_invite</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>NOTED: booster_id is the uuid of booster, and must be a invitation booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invitee_patron_id</td>
<td>Y</td>
<td>invitee&rsquo;s uuid</td>
</tr>
</tbody></table>

<h2 id="invitation-patron-list">Invitation patron list</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/boosters/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/patrons"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>if success invited, then returns status code 200 with following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patrons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"644553a9-35ff-4055-b9d5-d53ecc9c8697"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"David"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aasm_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad94291b-1f2b-4e2f-bdb6-8265ce0ed89f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kerry"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aasm_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opened"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"709eff27-5942-4530-be8d-de0421e61e5f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Peter"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aasm_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8a89686-84a8-4e65-9712-4be4223bca25"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ryan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aasm_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checked_in"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db8c75ab-a6e9-47dd-9a51-afc3be2f85c8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zee"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aasm_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checked_in"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if booster specify is invalid / expired, return status code 406 and following json message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Booster specify is not active now"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if current patron is not checked-in yet, return status code 406 and following json message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"You have not check in to this booster yet"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code> and get a patron list with aasm_state which is related to current login patron.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/boosters/:booster_id/patrons</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>NOTED: booster_id is the uuid of booster, and must be a invitation booster</p>

<h3 id="patron-response">Patron Response</h3>

<p>returned patron response along with aasm_state, here&rsquo;s a summary of possible values and related description</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>aasm_state</td>
<td>&lsquo;opened&rsquo;</td>
<td>patron is not invited by current patron, one can call invite api to invite that patron</td>
</tr>
<tr>
<td>aasm_state</td>
<td>&#39;waiting&rsquo;</td>
<td>patron is invited by current patron, can not invite anymore</td>
</tr>
<tr>
<td>aasm_state</td>
<td>&#39;cancelled&rsquo;</td>
<td>invitation to that patron is cancelled by current patron in earlier time, one can call invite api to invite that patron again</td>
</tr>
<tr>
<td>aasm_state</td>
<td>&#39;checked_in&rsquo;</td>
<td>that patron is already checked-in, either invited by current patron or invited by other patrons, can not invite anymore</td>
</tr>
</tbody></table>

<h2 id="inviation-host-list">Inviation Host list</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/boosters/c3d12f1a-1f0e-4ade-ae6a-49660db2b2ea/my_hosts"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>if success invited, then returns status code 200 with following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patrons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0dab179-de3b-486a-87bd-35643242350f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"David"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7bb37d4-873b-4b5d-81eb-46bb023a465e"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ryan"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if current login patron is already checked-in ( as a host ), then returns status code 406 with
following json message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"You have been check in"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if booster specify is invalid / expired, return status code 406 and following json message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Booster specify is not active now"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Patron Token</code> and get a host list for current login patron regarding on invitation booster specify</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/boosters/:booster_id/my_hosts</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>NOTED: <code class="prettyprint">booster_id</code> is the uuid of booster, and must be a invitation booster</p>

          <h1 id="patronapp-notification">PatronApp / Notification</h1>

<h2 id="notification-list">Notification List</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/notification_subscriptions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>if success then returns status code 200 with subscriptions detail objects.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"device_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b62efad0-5ae8-42c7-b11b-860ae3078952"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"os_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ios"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"subscribed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-13T10:02:49Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"device_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38cbc5fe-d051-4015-b8dc-7857334c61b5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"os_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"android"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"subscribed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-13T10:04:29Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code> and return all subscriptions record for current patron</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/patron_app/notification_subscriptions</code></p>

<h2 id="subscribe-notification">Subscribe Notification</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/notification_subscriptions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "device_token": "202f96fb-1536-43fa-a6ba-7b0387e90465",
    "os_type": '</span>ios<span class="s1">'
    }'</span>
</code></pre>

<blockquote>
<p>if success subscribed, then returns status code 200 with empty body.</p>

<p>if there&rsquo;s validation error, then return status code 422, and following error JSON
response, with error explaination:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Os type is not included in the list"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If current patron is subscribed already, still return status code 200 with empty body.</p>
</blockquote>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code> and subscribe current patron to notification pool</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/patron_app/notification_subscriptions</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_token</td>
<td>Y</td>
<td>iOS&rsquo;s device token</td>
</tr>
<tr>
<td>os_type</td>
<td>Y</td>
<td>Os type, available value are: &lsquo;ios&rsquo;, &#39;android&rsquo;</td>
</tr>
</tbody></table>

<h2 id="unsubscribe-notification">Unsubscribe Notification</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/patron_app/notification_subscriptions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -d <span class="s1">'{
    "device_token": "202f96fb-1536-43fa-a6ba-7b0387e90465",
    "os_type": '</span>ios<span class="s1">'
    }'</span>
</code></pre>

<blockquote>
<p>if success unsubscribed, then returns status code 200 with empty body.</p>

<p>if there&rsquo;s validation error, then return status code 422, and following error JSON
response, with error explaination:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Os type is not included in the list"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If current patron not subscribed before, still return status code 200 with empty body.</p>
</blockquote>

<p>This endpoint authenticate by <code class="prettyprint">Patron Token</code> and unsubscribe current patron from notification pool</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/patron_app/notification_subscriptions</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_token</td>
<td>Y</td>
<td>iOS&rsquo;s device token</td>
</tr>
<tr>
<td>os_type</td>
<td>Y</td>
<td>Os type, available value are: &#39;ios&rsquo;, &#39;android&rsquo;</td>
</tr>
</tbody></table>

          <h1 id="management-challenges">Management / Challenges</h1>

<h2 id="get-all-challenges">Get all challenges</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/challenges"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "start": "2018-03-01",
    "end": "2018-03-28"
    }'</span>

</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Challenge</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"challenges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"651b9916-53e4-4db9-8ccb-8d4108fbfed8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"651b9916"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-02"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"107acf53-d591-4a9b-aea4-580936d542ce"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"107acf53"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-03"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-04"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and Staff-ID Request Header, staff should be manager staff, and retrieves all challenges.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/challenges</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>Y</td>
<td>start range of query, format: &lsquo;YYYY-MM-DD&rsquo;</td>
</tr>
<tr>
<td>end</td>
<td>Y</td>
<td>end range of query, format: &#39;YYYY-MM-DD&rsquo;</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="get-challenge">Get Challenge</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/challenges/7a6cd829-1328-44dc-abdd-eda6e2d2f64a"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span>
</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Challenge</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a6cd829-1328-44dc-abdd-eda6e2d2f64a"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a6cd829"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-30"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-31"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total_sales"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ranking"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db3d1772-c934-47b1-ad28-c7e4582d74e3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Frist002"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last002"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"join_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-30T10:55:52.273Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"point_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="nt">"prize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ranking"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31f8330c-cf7c-43dc-939c-f00d4c140042"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Frist001"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last001"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"join_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-30T10:55:52.187Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"point_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"prize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ranking"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and Staff-ID Request Header, staff should be manager staff, and retrieves challenge detail.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/challenges/:challenge_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h2 id="create-challenge">Create Challenge</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/challenges"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "start_date": "2018-03-01",
    "end_date": "2018-03-07",
    "max_payout_rank": 10,
    "prize_percentage": 15
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status coce 200 and <code class="prettyprint">Challenge</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c-87d3-4531-a5b5-f58d44d053b8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-31"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Start date can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and create Challenge</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/management/challenges</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Y</td>
<td>start date of challenge</td>
</tr>
<tr>
<td>end_date</td>
<td>Y</td>
<td>end date of challenge</td>
</tr>
<tr>
<td>max_payout_rank</td>
<td>N</td>
<td>the maximum payout ranking, if not present, system setting will be used</td>
</tr>
<tr>
<td>prize_percentage</td>
<td>N</td>
<td>the prize percentage, if not present, system setting will be used</td>
</tr>
</tbody></table>

<h2 id="update-challenge">Update Challenge</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/challenges/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "start_date": "2018-03-01",
    "end_date": "2018-03-07",
    "max_payout_rank": 10,
    "prize_percentage": 15
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status code 200 and returns <code class="prettyprint">Challenge</code> object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c-87d3-4531-a5b5-f58d44d053b8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-31"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Start date can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and update Challenge</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/challenges/:challenge_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Y</td>
<td>start date of challenge</td>
</tr>
<tr>
<td>end_date</td>
<td>Y</td>
<td>end date of challenge</td>
</tr>
<tr>
<td>max_payout_rank</td>
<td>N</td>
<td>the maximum payout ranking, if not present, system setting will be used</td>
</tr>
<tr>
<td>prize_percentage</td>
<td>N</td>
<td>the prize percentage, if not present, system setting will be used</td>
</tr>
</tbody></table>

<h2 id="delete-challenge">Delete Challenge</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/challenges/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>If success, return 200 status code with empty response.</p>

<p>If failed, return 406 status code with error message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"can not delete non-scheduled challenges"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and update Challenge</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://phrenzi.com/api/management/challenges/:challenge_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h2 id="stop-challenge">Stop Challenge</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/challenges/a635683c-87d3-4531-a5b5-f58d44d053b8/stop"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH
</code></pre>

<blockquote>
<p>If success, return 200 status code with empty response.</p>

<p>If failed, return 406 status code with error message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"can not stop challenge that is not active"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and stop Challenge</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/challenges/:challenge_id/stop</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

          <h1 id="management-boosters">Management / Boosters</h1>

<h2 id="get-all-boosters">Get all boosters</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/boosters"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "start": "2018-03-01",
    "end": "2018-03-28"
    }'</span>

</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Booster</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"boosters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4a4bd792-d962-4304-bafd-4faccfd5be89"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dummy Title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">56686</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">56888</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"task_desc"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9bd28d9-a7a2-44e4-8752-88a154783f1f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dummy Title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-03"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">72000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number_of_invitation_sent"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number_of_invitation_redeemed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number_of_invitation_not_redeemed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number_of_host"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number_of_invitee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and Staff-ID Request Header, staff should be manager staff, and retrieves all boosters within range.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/boosters</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>Y</td>
<td>start range of query, format: &lsquo;YYYY-MM-DD&rsquo;</td>
</tr>
<tr>
<td>end</td>
<td>Y</td>
<td>end range of query, format: &#39;YYYY-MM-DD&rsquo;</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="get-booster">Get booster</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/boosters/0cb43edf-4623-4086-99a0-50554af32baa"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
</code></pre>

<blockquote>
<p>The above command returns <code class="prettyprint">Booster</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0cb43edf-4623-4086-99a0-50554af32baa"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dummy Title"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-30"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">72000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and Staff-ID Request Header, staff should be manager staff, and retrieves booster with stats</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/boosters/:booster_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="response-parameters">Response Parameters</h3>

<p>For CheckIn Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>should be &#39;check_in&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>start time of booster</td>
</tr>
<tr>
<td>end_time</td>
<td>if finished_by is &#39;end_time&rsquo;, would be present here. End time of booster</td>
</tr>
<tr>
<td>finished_by</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>if finished_by is &#39;quantity&rsquo;, would be present here. The maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Title of booster</td>
</tr>
<tr>
<td>point</td>
<td>redemption point</td>
</tr>
<tr>
<td>redeem_count</td>
<td>number of redemption so far</td>
</tr>
</tbody></table>

<p>For Task Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>should be &#39;task&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>start time of booster</td>
</tr>
<tr>
<td>end_time</td>
<td>if finished_by is &#39;end_time&rsquo;, would be present here. End time of booster</td>
</tr>
<tr>
<td>finished_by</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>if finished_by is &#39;quantity&rsquo;, would be present here. The maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Title of booster</td>
</tr>
<tr>
<td>point</td>
<td>redemption point</td>
</tr>
<tr>
<td>redeem_count</td>
<td>number of redemption so far</td>
</tr>
</tbody></table>

<p>For Invitation Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>should be &#39;invitation&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>start time of booster</td>
</tr>
<tr>
<td>end_time</td>
<td>end time of booster</td>
</tr>
<tr>
<td>host_point</td>
<td>redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Title of booster</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>if unlimited is false, would be present here. Maximum of Invitaiton host can sent</td>
</tr>
<tr>
<td>number_of_invitation_sent</td>
<td>number of invitation sent out</td>
</tr>
<tr>
<td>number_of_invitation_redeemed</td>
<td>number of invitation that have been redeemed</td>
</tr>
<tr>
<td>number_of_invitation_not_redeemed</td>
<td>number of invitation that have not been redeemed</td>
</tr>
<tr>
<td>number_of_host</td>
<td>number of host</td>
</tr>
<tr>
<td>number_of_invitee</td>
<td>number of invitee</td>
</tr>
</tbody></table>

<p>For Tiered Check In Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>should be &#39;tiered_check_in&rsquo;</td>
</tr>
<tr>
<td>finished_by</td>
<td>&#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>start time of booster</td>
</tr>
<tr>
<td>end_time</td>
<td>if finished_by is end_time, specify end time of booster</td>
</tr>
<tr>
<td>quantity</td>
<td>if finished_by is quantity, specify quantity here</td>
</tr>
<tr>
<td>point</td>
<td>redemption point as for check-in</td>
</tr>
<tr>
<td>enable_invitation</td>
<td>enable or not invitation feature</td>
</tr>
<tr>
<td>host_point</td>
<td>redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Title of booster</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>if unlimited is false, would be present here. Maximum of Invitaiton host can sent</td>
</tr>
<tr>
<td>number_of_invitation_sent</td>
<td>number of invitation sent out</td>
</tr>
<tr>
<td>number_of_invitation_redeemed</td>
<td>number of invitation that have been redeemed</td>
</tr>
<tr>
<td>number_of_invitation_not_redeemed</td>
<td>number of invitation that have not been redeemed</td>
</tr>
<tr>
<td>number_of_host</td>
<td>number of host</td>
</tr>
<tr>
<td>number_of_invitee</td>
<td>number of invitee</td>
</tr>
</tbody></table>

<p>For Target Amount Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>should be &#39;target_amount&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>start time of booster</td>
</tr>
<tr>
<td>end_time</td>
<td>End time of booster</td>
</tr>
<tr>
<td>point</td>
<td>redemption point</td>
</tr>
<tr>
<td>target_amount</td>
<td>target_amount that patron purchase to redeem the point</td>
</tr>
<tr>
<td>title</td>
<td>Title of booster</td>
</tr>
<tr>
<td>redeem_count</td>
<td>number of redemption so far</td>
</tr>
<tr>
<td>number_of_redeemed_player</td>
<td>number of redeemed player so far</td>
</tr>
</tbody></table>

<p>For Credit Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>should be &#39;credit&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>start time of booster</td>
</tr>
<tr>
<td>end_time</td>
<td>End time of booster</td>
</tr>
<tr>
<td>cash_back</td>
<td>cash back percentage, for instance 3.5% cash back, value is 3.5</td>
</tr>
<tr>
<td>title</td>
<td>Title of booster</td>
</tr>
<tr>
<td>redeem_count</td>
<td>number of redeemed so far</td>
</tr>
</tbody></table>

<h2 id="create-boosters">Create Boosters</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/booster"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "booster_type": "check_in",
    "date": "2018-03-01",
    "start_time": 39600,
    "finished_by": "end_time",
    "end_time": 79200,
    "point": 100,
    "title": "CheckIn and Play"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status coce 200 and <code class="prettyprint">Booster</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0d028b17-e0c7-47ee-a951-3884b39e0603"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CheckIn and Play"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">46800</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">54000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Date can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and create Booster</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/management/boosters</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<p>For CheckIn Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;check_in&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Task Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;task&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Invitation Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;invitation&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>host_point</td>
<td>Y</td>
<td>redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>Y</td>
<td>redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>Y</td>
<td>either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Tiered Check In Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;tiered_check_in&rsquo;</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>should be &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required, specify end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required, quantity of booster that can redeemed</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>check-in point</td>
</tr>
<tr>
<td>enable_invitation</td>
<td>Y</td>
<td>true or false</td>
</tr>
<tr>
<td>host_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>N</td>
<td>if enable_invitation, required, either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Target Amount Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;target_amount&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
<tr>
<td>target_amount</td>
<td>Y</td>
<td>target_amount that patron purchase to redeem the point</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
</tbody></table>

<p>For Credit Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;credit&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>cash_back</td>
<td>Y</td>
<td>cash_back of sales</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
</tbody></table>

<h2 id="create-booster-from-booster-template">Create Booster From Booster Template</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/boosters/from_booster_template"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "id": "4e92881c-6aa8-47c7-afb2-00bddb909c32",
    "date": "2018-03-01"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status coce 200 and <code class="prettyprint">Booster</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0d028b17-e0c7-47ee-a951-3884b39e0603"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CheckIn and Play"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">46800</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">54000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Date can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and create Booster from existing booster_template id</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/management/boosters/from_booster_template</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Y</td>
<td>booster template&rsquo;s id</td>
</tr>
<tr>
<td>date</td>
<td>Y</td>
<td>booster scheduled date</td>
</tr>
</tbody></table>

<h2 id="update-booster">Update Booster</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/boosters/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "date": "2018-03-01",
    "start_time": 39600,
    "finished_by": "end_time",
    "end_time": 79200,
    "point": 100,
    "title": "CheckIn and Play"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status code 200 and returns <code class="prettyprint">Booster</code> object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c-87d3-4531-a5b5-f58d44d053b8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CheckIn and Play"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">79200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redeem_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Date can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and update Booster</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/boosters/:booster_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<p>For CheckIn Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Task Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Invitation Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>host_point</td>
<td>Y</td>
<td>redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>Y</td>
<td>redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>Y</td>
<td>either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Tiered Check In Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>should be &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required, specify end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required, quantity of booster that can redeemed</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>check-in point</td>
</tr>
<tr>
<td>enable_invitation</td>
<td>Y</td>
<td>true or false</td>
</tr>
<tr>
<td>host_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>N</td>
<td>if enable_invitation, required, either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Target Amount Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
<tr>
<td>target_amount</td>
<td>Y</td>
<td>target_amount that patron purchase to redeem the point</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
</tbody></table>

<p>For Credit Booster</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>Y</td>
<td>date of booster</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>cash_back</td>
<td>Y</td>
<td>cash bach of sales</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster</td>
</tr>
</tbody></table>

<p><em>NOTED:</em></p>

<ul>
<li>If booster status is &#39;actived&rsquo;, nothing can be updated</li>
<li>booster_type can not been changed</li>
</ul>

<h2 id="delete-booster">Delete Booster</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/booster/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>If success, return 200 status code with empty response.</p>

<p>If failed, return 406 status code with error message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"can not delete booster that is already been actived"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and delete Booster</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://phrenzi.com/api/management/boosters/:booster_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h2 id="stop-booster">Stop Booster</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/boosters/a635683c-87d3-4531-a5b5-f58d44d053b8/stop"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH
</code></pre>

<blockquote>
<p>If success, return 200 status code with empty response.</p>

<p>If failed, return 406 status code with error message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"can not stop booster that is not active"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and stop Booster</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/boosters/:booster_id/stop</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

          <h1 id="management-booster-templates">Management / Booster Templates</h1>

<h2 id="get-all-booster-templates">Get all booster templates</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/booster_templates"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">BoosterTemplate</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster_templates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"768877b9-55fd-4fc0-bc21-4d73d1af6fb6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"random title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">72000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acca7b24-a29f-4143-be85-442f47d0f204"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"random title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">72000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"task_desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Task desc"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b4c2e31e-9e0a-4cb7-a255-875da0877a88"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"random title"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">72000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"host_point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"invitee_point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"unlimited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invitation"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and Staff-ID Request Header, staff should be manager staff, and retrieves all booster templates</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/booster_templates</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h2 id="create-booster-templates">Create Booster Templates</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/booster_templates"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "booster_type": "check_in",
    "start_time": 39600,
    "finished_by": "end_time",
    "end_time": 79200,
    "point": 100,
    "title": "CheckIn and Play"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status coce 200 and <code class="prettyprint">Booster</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0d028b17-e0c7-47ee-a951-3884b39e0603"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CheckIn and Play"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">46800</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">54000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Start time can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and create Booster Template</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/management/booster_templates</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<p>For CheckIn Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &lsquo;check_in&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Task Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;task&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Invitation Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;invitation&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>host_point</td>
<td>Y</td>
<td>redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>Y</td>
<td>redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>Y</td>
<td>either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Tiered Check In Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;tiered_check_in&rsquo;</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>should be &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required, specify end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required, quantity of booster that can redeemed</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>check-in point</td>
</tr>
<tr>
<td>enable_invitation</td>
<td>Y</td>
<td>true or false</td>
</tr>
<tr>
<td>host_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>N</td>
<td>if enable_invitation, required, either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Target Amount Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>booster_type</td>
<td>Y</td>
<td>should be &#39;target_amount&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
<tr>
<td>target_amount</td>
<td>Y</td>
<td>target_amount that patron purchase to redeem the point</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
</tbody></table>

<h2 id="update-booster-template">Update Booster Template</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/booster_templates/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "start_time": 39600,
    "finished_by": "end_time",
    "end_time": 79200,
    "point": 100,
    "title": "CheckIn and Play"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status code 200 and returns <code class="prettyprint">BoosterTemplate</code> object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"booster_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c-87d3-4531-a5b5-f58d44d053b8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CheckIn and Play"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">39600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">79200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"check_in"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Start time can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and update Booster Template</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/booster_templates/:booster_template_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<p>For CheckIn Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Task Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required. end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>either &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required. the maximum time for redemption.</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
</tbody></table>

<p>For Invitation Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>host_point</td>
<td>Y</td>
<td>redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>Y</td>
<td>redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>Y</td>
<td>either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Tiered Check In Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>finished_by</td>
<td>Y</td>
<td>should be &#39;end_time&rsquo; or &#39;quantity&rsquo;</td>
</tr>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>N</td>
<td>if finished_by is &#39;end_time&rsquo;, required, specify end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>quantity</td>
<td>N</td>
<td>if finished_by is &#39;quantity&rsquo;, required, quantity of booster that can redeemed</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>check-in point</td>
</tr>
<tr>
<td>enable_invitation</td>
<td>Y</td>
<td>true or false</td>
</tr>
<tr>
<td>host_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a host</td>
</tr>
<tr>
<td>invitee_point</td>
<td>N</td>
<td>if enable_invitation, required, redemption point as a invitee</td>
</tr>
<tr>
<td>unlimited</td>
<td>N</td>
<td>if enable_invitation, required, either true or false</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
<tr>
<td>invitation_limit</td>
<td>N</td>
<td>if unlimited is false, then required. maximum of Invitaiton host can sent</td>
</tr>
</tbody></table>

<p>For Target Amount Booster Template</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>Y</td>
<td>start time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>end_time</td>
<td>Y</td>
<td>end_time of booster template, it&rsquo;s second to the begining of the day</td>
</tr>
<tr>
<td>point</td>
<td>Y</td>
<td>redemption point</td>
</tr>
<tr>
<td>target_amount</td>
<td>Y</td>
<td>target_amount that patron purchase to redeem the point</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>Title of booster template</td>
</tr>
</tbody></table>

<p><em>NOTED:</em></p>

<ul>
<li>booster_type can not been changed</li>
</ul>

<h2 id="delete-booster-template">Delete Booster Template</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/booster_template/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>If success, return 200 status code with empty response.</p>
</blockquote>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and delete Booster Template</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://phrenzi.com/api/management/booster_templates/:booster_template_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

          <h1 id="management-holidays">Management / Holidays</h1>

<h2 id="get-all-holidays">Get all holidays</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/holidays"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "start": "2018-03-01",
    "end": "2018-03-28"
    }'</span>

</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Holiday</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"holidays"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d76c3ee-193b-4504-bfbf-c19ee217fa19"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-02"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39f44649-cb0d-44f3-8e47-a4bfdaa9dd83"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyString"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-03"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-04"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and Staff-ID Request Header, staff should be manager staff, and retrieves all holidays.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/holidays</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>Y</td>
<td>start range of query, format: &lsquo;YYYY-MM-DD&rsquo;</td>
</tr>
<tr>
<td>end</td>
<td>Y</td>
<td>end range of query, format: &#39;YYYY-MM-DD&rsquo;</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="create-holiday">Create Holiday</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/holidays"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "start_date": "2018-03-01",
    "end_date": "2018-03-07",
    "title": "X-Max"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status coce 200 and <code class="prettyprint">Holiday</code> objects:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"holiday"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3bde6c6c-d856-4ce2-8879-2f8eec024547"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"X-Max"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-07"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Start date can't be blank"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and create Holiday</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/management/holidays</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Y</td>
<td>start date of holiday</td>
</tr>
<tr>
<td>end_date</td>
<td>Y</td>
<td>end date of holiday</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>the title displayed for Holiday</td>
</tr>
</tbody></table>

<h2 id="update-holiday">Update Holiday</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/holidays/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "start_date": "2018-03-01",
    "end_date": "2018-03-07",
    "title": "X-max"
    }'</span>
</code></pre>

<blockquote>
<p>if okay, return status code 200 and returns <code class="prettyprint">Holiday</code> object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"holiday"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a635683c-87d3-4531-a5b5-f58d44d053b8"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"X-max"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-07"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if invalid, return status coce 422 and object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Start date can't be blank"</span><span class="p">,</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and update Holiday</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/holidays/:holiday_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Y</td>
<td>start date of holiday</td>
</tr>
<tr>
<td>end_date</td>
<td>Y</td>
<td>end date of holiday</td>
</tr>
<tr>
<td>title</td>
<td>Y</td>
<td>the title displayed for Holiday</td>
</tr>
</tbody></table>

<h2 id="delete-holiday">Delete Holiday</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/holidays/a635683c-87d3-4531-a5b5-f58d44d053b8"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>If success, return 200 status code with empty response.</p>
</blockquote>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code> ( using Staff-ID Request Header, staff should be manager staff ) and delete Holiday</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://phrenzi.com/api/management/holidays/:holiday_id</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

          <h1 id="management-patrons">Management / Patrons</h1>

<h2 id="get-all-patrons">Get all patrons</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/patrons"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span>
</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Patron</code> object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patrons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8d3d7ecd-585d-4f2f-ad21-1b457e062681"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patron1@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.23"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52553b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzi.com/uploads/cache/a8a70be864925f7bddc0bcf93fa89986.jpeg"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fcbdd18f-e5ea-4368-8cf4-2e688e604a40"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patron2@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25e8ac"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzi.com/uploads/cache/a8a70be864925f7bddc0bcf93fa89986.jpeg"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and retrieves all patrons.</p>

<p>Noted that credit_balance returned from patron object is for manager&rsquo;s establishment,
the <code class="prettyprint">credit_balance</code> return from different manager authenticated should be differernt.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/patrons</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="get-patron">Get patron</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/patrons/ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span>
</code></pre>

<blockquote>
<p>The above command return <code class="prettyprint">Patron</code> object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patron1@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"credit_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.23"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"519665"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://phrenzi.com/uploads/cache/a8a70be864925f7bddc0bcf93fa89986.jpeg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manger Token</code>, and retrieves patron object.</p>

<p>Noted that credit_balance returned from patron object is for manager&rsquo;s establishment,
the <code class="prettyprint">credit_balance</code> return from different manager authenticated should be differernt.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/patrons/ddbd0c3c-404d-4ce1-9042-9baecb4ef585</code></p>

          <h1 id="management-tasks">Management / Tasks</h1>

<h2 id="get-all-active-task-boosters">Get all active task boosters</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/tasks"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "patron_id": "8d3d7ecd-585d-4f2f-ad21-1b457e062681"
    }'</span>

</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Task Booster</code> object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25fe526b-04da-407b-84a3-a497c26fb628"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T04:53:20Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"task_desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sing a Song"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T05:03:20Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redeemed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T05:00:00Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7bd71f62-7f00-40ab-8104-ff9afd8219f3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"booster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actived"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T04:55:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"finished_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"task_desc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sing a love Song"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-10T05:03:20Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redeemed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If patron_id missing, return 422 error status code, and return following json error message:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"patron_id is required"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and retrieves all active task boosters along with redeemed information with patron_id selected</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/tasks</code></p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>patron_id</td>
<td>Y</td>
<td>the patron&rsquo;s id for task booster&rsquo;s redeem information</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="redeem-task">Redeem Task</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/tasks/ddbd0c3c-404d-4ce1-9042-9baecb4ef585/redeem"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "patron_id": "8d3d7ecd-585d-4f2f-ad21-1b457e062681"
    }'</span>

</code></pre>

<blockquote>
<p>The above command return status code 200 and json response like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"redeem task successs"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If patron is already redeemed, return status code 406 and json response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Already redeemed"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If patron_id is not provied, return status code 422 and json response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"patron_id is required"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If required task booster is not actived or do not have active challenge right now, return status code 406 and json response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"There is no active Challenge or Booster today"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manger Token</code>, and redeem task booster for patron provieded.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/tasks/:task_id/redeem</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>patron_id</td>
<td>Y</td>
<td>the patron&rsquo;s id for task booster&rsquo;s redeem information</td>
</tr>
</tbody></table>

          <h1 id="management-sales-transactions">Management / Sales Transactions</h1>

<h2 id="get-all-sales-transactions-by-patron_id-for-current-establishment">Get all sales transactions by patron_id for current establishment</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "patron_id": "a9ce92dd-1b1d-498a-b7d0-77fffccd20de"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15477325-11fa-4b85-87a9-30f6272656be"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9ce92dd-1b1d-498a-b7d0-77fffccd20de"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"277e92b3-3332-4ccc-92e3-c17eb6e7c507"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a47366866"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T19:04:28Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0db22eca-326f-4b8c-b5bc-c517256cc64c"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9ce92dd-1b1d-498a-b7d0-77fffccd20de"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"277e92b3-3332-4ccc-92e3-c17eb6e7c507"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"613ef86f6b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T19:04:28Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and retrieves transaction records by establishment by patron</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/management/sales_transactions</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Requred?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>patron_id</td>
<td>N</td>
<td>only list transactions that belongs to patron</td>
</tr>
<tr>
<td>trans_code</td>
<td>N</td>
<td>transaction&rsquo;s trans_code</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions, default to be page 1</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="create-sales-transaction">Create Sales Transaction</h2>

<blockquote>
<p>For creating fullay sales transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "trans_type": "sale",
    "patron_id": "ddbd0c3c-404d-4ce1-9042-9baecb4ef585",
    "sales_amount": 200.00,
    "credit_amount": 0.0
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f485151-80ad-4d25-88bd-89e343b1e7f6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3da90d84-92db-487f-af45-e020fbcaf0bd"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9914f6658f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>For creating partially sales transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "trans_type": "sale",
    "patron_id": "3afc8c7e-ea86-4b85-abb6-1a3616a80f6b",
    "sales_amount": 200.00,
    "credit_amount": -125.0
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f1ba450-4e4c-4570-bf4f-26cf6664566b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3afc8c7e-ea86-4b85-abb6-1a3616a80f6b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ac3affe-540b-4fde-8dee-eb6ac5f38376"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"202.6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2fdbce4d14"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc8225e705"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:36:04Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"441a3707-3015-4bb7-9df9-0d2fae3a4db1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3afc8c7e-ea86-4b85-abb6-1a3616a80f6b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ac3affe-540b-4fde-8dee-eb6ac5f38376"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"125.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-125.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-120.6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77.6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4042580c33"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc8225e705"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:36:04Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Purchase"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>For creating fully credit redeem transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "type": "sale",
    "patron_id": "ddbd0c3c-404d-4ce1-9042-9baecb4ef585",
    "sales_amount": 200.00,
    "credit_amount": -200.0
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4f27f679-af58-4046-8b96-49f53148f8b4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95884702-f53a-4bec-891b-ec9b0bbb5acb"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f1b1ef0e7b"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:39:44Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Purchase"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>For creating correction credit transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "type": "correction",
    "patron_id": "ddbd0c3c-404d-4ce1-9042-9baecb4ef585",
    "sales_amount": 0.0,
    "credit_amount": -200.0
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b4c6b6c6-7bca-47f9-97ea-e470480a4475"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f9a3eed7-b948-4ad9-bf09-b8a54807ccab"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"correction"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25aa44f431"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:40:32Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Correction"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Error Scenarios</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "type": "correction",
    "patron_id": "ddbd0c3c-404d-4ce1-9042-9baecb4ef585",
    "sales_amount": 0.0,
    "credit_amount": -200.0
    }'</span>
</code></pre>

<blockquote>
<p>if establishment is not open, the above command returns status code 406, and errors json like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Current Establishment is not opened"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if current credit balance is not enough, then return status code 406, and errors json like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Balance not enough"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if input validation is failed</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"is not included in the list"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and create transaction records.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/management/sales_transactions</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_type</td>
<td>Y</td>
<td>&lsquo;sales&rsquo;/&#39;correction&rsquo;</td>
</tr>
<tr>
<td>sales_amount</td>
<td>Y</td>
<td>the sale amount</td>
</tr>
<tr>
<td>credit_amount</td>
<td>Y</td>
<td>the credit amount</td>
</tr>
<tr>
<td>patron_id</td>
<td>Y</td>
<td>UUID of patron</td>
</tr>
<tr>
<td>cash_back</td>
<td>N</td>
<td>cash back for one time use case</td>
</tr>
<tr>
<td>password</td>
<td>N</td>
<td>if cash_back is present, then password of patron must provided</td>
</tr>
</tbody></table>

<h3 id="query-exmaple">Query Exmaple:</h3>

<p>normal sale record, without credit redeem:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_type</td>
<td>&#39;sale&rsquo;</td>
</tr>
<tr>
<td>patron_id</td>
<td>&ldquo;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rdquo;</td>
</tr>
<tr>
<td>sales_amount</td>
<td>200.0</td>
</tr>
<tr>
<td>credit_amount</td>
<td>0.0</td>
</tr>
</tbody></table>

<p>sale record, with partially credit redeem ( 200 sale amount, but with 125 credit redeem , so patron just need to pay 75.0 ):</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_type</td>
<td>&#39;sale&rsquo;</td>
</tr>
<tr>
<td>patron_id</td>
<td>&ldquo;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rdquo;</td>
</tr>
<tr>
<td>sales_amount</td>
<td>200.0</td>
</tr>
<tr>
<td>credit_amount</td>
<td>-125.0</td>
</tr>
</tbody></table>

<p>sale record, fully credit redeem ( 200 sale amount, 200 credit redeem, so patron do not need to pay):</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_type</td>
<td>&#39;sale&rsquo;</td>
</tr>
<tr>
<td>patron_id</td>
<td>&ldquo;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rdquo;</td>
</tr>
<tr>
<td>sales_amount</td>
<td>200.0</td>
</tr>
<tr>
<td>credit_amount</td>
<td>-200.0</td>
</tr>
</tbody></table>

<p>positive correction record:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_type</td>
<td>&#39;correction&rsquo;</td>
</tr>
<tr>
<td>patron_id</td>
<td>&ldquo;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rdquo;</td>
</tr>
<tr>
<td>sales_amount</td>
<td>0.0</td>
</tr>
<tr>
<td>credit_amount</td>
<td>125.0</td>
</tr>
</tbody></table>

<p>negative correction record:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trans_type</td>
<td>&#39;correction&rsquo;</td>
</tr>
<tr>
<td>patron_id</td>
<td>&ldquo;ddbd0c3c-404d-4ce1-9042-9baecb4ef585&rdquo;</td>
</tr>
<tr>
<td>sales_amount</td>
<td>0.0</td>
</tr>
<tr>
<td>credit_amount</td>
<td>-125.0</td>
</tr>
</tbody></table>

<h2 id="delete-sales-transaction">Delete Sales Transaction</h2>

<blockquote>
<p>For delete fullay sales transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions/ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4ef1c91-105b-4323-b1cb-2642bb7fa870"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cce8f71d-5eda-4b74-b3ed-bc5fc46edfe3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d9b6a80d-309f-49d5-9714-39b80cef43f9"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-100.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-3.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"196.5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c57d322c62"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:51:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:51:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase Deletion"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>For delete partially sales transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions/ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e78701fa-259c-4608-83d8-ef8701841c07"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0731af3-d5ce-4e75-a689-fdf13c05968f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e1f01e1-d489-4d62-98d7-19a4d21345cc"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-75.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-2.63"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-2.63"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"197.37"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"902c2747aa"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdefgfhi"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:53:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:53:12Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cash Purchase Deletion"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41c6f8d1-6539-436e-aeef-86d870c7f4c1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0731af3-d5ce-4e75-a689-fdf13c05968f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e1f01e1-d489-4d62-98d7-19a4d21345cc"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-125.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"125.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"125.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"322.37"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fc5031cc8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdefgfhi"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:53:11Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a2c4670-c588-401a-9f03-a9c8783557be"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:53:12Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Purchase Deletion"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>For delete fully credit redeem transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions/ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11408bea-bb4d-460d-8614-9ca74e5419bf"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51b5e8fe-7724-45a7-a118-9eef4d6196cd"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ca16c11-5f5e-4fda-ae6f-b485161710ed"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"applied_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sales_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"credit_subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"remaining_credit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"400.0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12d7967d6e"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:55:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-29T18:55:18Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit Purchase Deletion"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>While specify delete transaction is invalid, or fake, or not belongs to current establishment</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions/this-is-a-fake-id"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 406 and following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Transaction is invalid"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>While specify delete transaction is created 30 days before,</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/sales_transactions/ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 406 and following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Can not delete transaction created 30 days before"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and delete transaction records.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/management/sales_transactions/#{transaction_id}</code></p>

          <h1 id="management-point-transactions">Management / Point Transactions</h1>

<h2 id="get-all-transactions-for-current-establishment">Get all transactions for current establishment</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/point_transactions"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "patron_id": "602247e3-9a20-4862-b772-a7fd617fc227"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7883337f-2353-4195-ae45-c8c554a916f5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"602247e3-9a20-4862-b772-a7fd617fc227"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f4c1f46-0e9b-4526-9bdf-1f85ba7f2869"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7417f876-a72f-490c-9324-f4b81003cbf3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase Points"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9993bad9ec"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-05T13:39:03Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"correction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61227894-84f1-452d-8c4f-d5979f607097"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"602247e3-9a20-4862-b772-a7fd617fc227"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f4c1f46-0e9b-4526-9bdf-1f85ba7f2869"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7417f876-a72f-490c-9324-f4b81003cbf3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase Points"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa5c8f5c95"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-05T13:39:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"correction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and retrieves point transaction records by establishment by patron</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<aside class="info">This API support pagination. please refer to <a
href="#link-response-header">Link Response Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/management/point_transactions</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Requred?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>patron_id</td>
<td>N</td>
<td>only list transactions that belongs to patron</td>
</tr>
<tr>
<td>page</td>
<td>N</td>
<td>the page results of all transactions, default to be page 1</td>
</tr>
<tr>
<td>per_page</td>
<td>N</td>
<td>the number of transaction record return per page by api, default to be 20</td>
</tr>
</tbody></table>

<h2 id="delete-point-transaction">Delete Point Transaction</h2>

<blockquote>
<p>For delete task redeemed point transaction</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/point_transactions/ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 200 OK if success and json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"008b511b-5d68-454f-9112-619ca2d703ae"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"patron_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa2b6e2e-4a61-4254-938b-d00e1114c668"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"establishment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad4f2664-e0ac-4450-aa54-4ff4b1986411"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"challenge_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8ad41d9-b98a-4003-b375-ec61b6204a4a"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"point"</span><span class="p">:</span><span class="w"> </span><span class="mi">-9</span><span class="p">,</span><span class="w">
      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Task Booster Deletion"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"trans_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88711d07e0"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"tracked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-12T07:15:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"correction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"del_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ddbd0c3c-404d-4ce1-9042-9baecb4ef585"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-12T07:15:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>While specify delete transaction is invalid, or not belongs to current establishment</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/point_transactions/this-is-a-fake-id"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
<p>The above command returns HTML status code 406 and following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Point Transaction is invalid"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and delete point transaction records.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a></aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://example.com/api/management/point_transactions/#{transaction_id}</code></p>

          <h1 id="management-staffs">Management / Staffs</h1>

<h2 id="get-all-staffs">Get all staffs</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/staffs"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Staff</code> object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"staffs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"828055eb-a94d-4f71-aa90-110d5b747468"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"manager"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"setuped"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10efd10c-22dc-4871-83cc-e8a36c103c85"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"manager"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"setuped"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and retrieves all staffs.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/staffs</code></p>

<h2 id="staff-setup">Staff Setup</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/staffs/10efd10c-22dc-4871-83cc-e8a36c103c85/setup"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span><span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "pin_code": "1234"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns <code class="prettyprint">Staff</code> object like this and status code 200 if success:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"staff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10efd10c-22dc-4871-83cc-e8a36c103c85"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"manager"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"setuped"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If requested staff is not found, return 404 and json response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff not found"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If requested setup is fail, return 422 and json response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Pin code must be 4 digit"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If requested staff already been setup, return 406 and json response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff setup already"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and setup staff&rsquo;s pin_code</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/staffs/:staff_id/setup</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pin_code</td>
<td>the pin code of staff, need to be 4 digit lenght</td>
</tr>
</tbody></table>

<h2 id="staff-sign-in">Staff Sign In</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/staffs/sign_in"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span><span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{
    "staff_id": "10efd10c-22dc-4871-83cc-e8a36c103c85",
    "pin_code": "1234"
    }'</span>
</code></pre>

<blockquote>
<p>The above command returns <code class="prettyprint">Staff</code> object like this and status code 200 if success:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"staff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10efd10c-22dc-4871-83cc-e8a36c103c85"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"manager"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"setuped"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If sign in failed, return status code 422 and response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Pin code is invalid."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If requested staff not found, return 404 not_found, and response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff not found"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If requested staff do not setup yet, return 479, and response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff not setup yet"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and sign in staff</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://phrenzi.com/api/management/staffs/sign_in</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>staff_id</td>
<td>the uuid of staff</td>
</tr>
<tr>
<td>pin_code</td>
<td>the pin code of staff, need to be 4 digit lenght</td>
</tr>
</tbody></table>

          <h1 id="management-supreme-establishment-list">Management / Supreme / Establishment List</h1>

<h2 id="get-all-establishments-list">Get all establishments list</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/supreme/establishments"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span>
</code></pre>

<blockquote>
<p>The above command returns array of <code class="prettyprint">Establishment</code> object like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"establishments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8d3d7ecd-585d-4f2f-ad21-1b457e062681"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fcbdd18f-e5ea-4368-8cf4-2e688e604a40"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Roma"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and manager need to be a super manager, this endpoint will retrieve all establishments.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/supreme/establishments</code></p>

<h2 id="select-establishment">Select Establishment</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/supreme/ddbd0c3c-404d-4ce1-9042-9baecb4ef585/select"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -X PATCH
</code></pre>

<blockquote>
<p>If success, The above command return status code 200 with empty json object</p>
</blockquote>

<p>This endpoint authenticated by <code class="prettyprint">Manger Token</code>, and manager need to be a super manager, this endpoint will update manager&rsquo;s establishment.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/supreme/ddbd0c3c-404d-4ce1-9042-9baecb4ef585/select</code></p>

          <h1 id="management-settings">Management / Settings</h1>

<h2 id="get-cash-back">Get cash back</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/settings/cash_back"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span>
</code></pre>

<blockquote>
<p>if success, return http status code 200 with following json object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"setting"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cash_back"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if staff is not login, return status code 479, and following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff not signed in"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, for example, unauthorized, then return http status code 401 with following json object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Authorized users only."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint require <code class="prettyprint">Manager Token</code> and return cash back settings</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a>, and please make sure staff is a manager</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://phrenzi.com/api/management/cash_back</code></p>

<h2 id="update-cash-back">Update cash back</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/settings/cash_back"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "password": "current_password",
    "cash_back": 4.5
    }'</span>
</code></pre>

<blockquote>
<p>if success, returns HTML status code 200 OK, with following object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"setting"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cash_back"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if staff is not login, return status code 479, and following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff not signed in"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if staff is not a manager, return status code 479, and following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current Staff is not a manager"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if unauthorize, returns HTML status code 401, with following object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Authorized users only."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if password is invalid, return HTML status code 406, with following object:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Invalid Password"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and update cash_back for current establishment.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a>, and please make sure staff is a manager</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/cash_back</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cash_back</td>
<td>the cash_back to update, within 0 and 100</td>
</tr>
<tr>
<td>password</td>
<td>the current password for current manager</td>
</tr>
</tbody></table>

<h2 id="update-password">Update Password</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://phrenzi.com/api/management/settings/passwords"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: token"</span> <span class="se">\</span>
  -H <span class="s2">"X-Staff-Id: 828055eb-a94d-4f71-aa90-110d5b747468"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "current_password": "current_password",
    "password": "new_password",
    "password_confirmation": "new_password"
    }'</span>
</code></pre>

<blockquote>
<p>If success, return http status code <code class="prettyprint">200</code> with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"manager"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2544a3af-cda6-4a0d-b760-17e43e1cc165"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manager1@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"establishment_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Bar"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if staff is not login, return status code 479, and following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Staff not signed in"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if staff is not a manager, return status code 479, and following json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current Staff is not a manager"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>if failed, return http status code <code class="prettyprint">422</code>, with following json object</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Current password is invalid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Password confirmation doesn't match Password"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint authenticated by <code class="prettyprint">Manager Token</code>, and update current password for current manager.</p>

<aside class="info">This API require Staff-Id Request Header. please refer to <a
href="#staff-id-request-header">Staff-Id Request Header section</a>, and please make sure staff is a manager</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH http://phrenzi.com/api/management/settings/update_password</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>current_password</td>
<td>the current password for current manager</td>
</tr>
<tr>
<td>password</td>
<td>the new password for current manager</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>confirmation for the new password</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>The Phrenzi API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The resource requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified resource could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a resource with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The resource requested has been removed from our servers</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity, this happend while request params have validation errors</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many resources! Slow down!</td>
</tr>
<tr>
<td>479</td>
<td>Staff Not Login / Staff Not Setup &ndash; the endpoint protected by staff authenticated, you got to login staff first, and make sure staff is properly setup, then call this api</td>
</tr>
<tr>
<td>480</td>
<td>Only manager staff are authorized to this operation</td>
</tr>
<tr>
<td>490</td>
<td>Super Manager not signed any establishment yet</td>
</tr>
<tr>
<td>491</td>
<td>Super Manager not allow to operate as current Establishment owner to update/delete</td>
</tr>
<tr>
<td>492</td>
<td>Current Manager is not a super manager</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
